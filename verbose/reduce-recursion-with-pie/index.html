<!DOCTYPE html>
<html lang="en">

<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer">
<meta name="description" content="


I was having trouble understanding reduce() and recursion in JavaScript, so I wrote this article to explain it to myself (hey, look, recursion!). I hope you find my examples both helpful and delicious.

Given an array with nested arrays:


">

<meta property="og:title" content="


Understanding Array.prototype.reduce() and recursion using apple pie


">
<meta property="og:description" content="


I was having trouble understanding reduce() and recursion in JavaScript, so I wrote this article to explain it to myself (hey, look, recursion!). I hope you find my examples both helpful and delicious.

Given an array with nested arrays:


">
<meta property="og:image" content="


https://vickylai.io/pixels/recursion-pie.jpg


">
<meta property="og:url" content="https://vickylai.io/verbose/reduce-recursion-with-pie/">

<meta name="twitter:image" content="


https://vickylai.io/pixels/recursion-pie.jpg


">
<meta name="twitter:card" content="summary_large_image">

<title>



    Understanding Array.prototype.reduce() and recursion using apple pie



</title>
<link rel="canonical" href="https://vickylai.io/verbose/reduce-recursion-with-pie/">



<link rel="stylesheet" href="/css/clearly.css?t=21">


<link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet"> 

<link rel="shortcut icon"

    href="/img/code.ico"

>


<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-98623582-1', 'auto');
ga('send', 'pageview');
</script>
<script async src='//www.google-analytics.com/analytics.js'></script>




<script
src="https://code.jquery.com/jquery-3.2.1.min.js"
integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
crossorigin="anonymous"></script>

<script src="/js/tagline.js?t=21"></script>

</head>

<body>
    <div id="top">
        <div class="sticky-nav">
    <nav class="navbar" role="navigation" aria-label="main navigation">
        <div class="navbar-brand">
            <a class="navbar-item" href="/"> 
                Vicky Lai
            </a>

            <a class="navbar-item" href="/verbose">
                Blog
            </a>
            <a class="navbar-item" href="/#code">
                Code
            </a>
            <a class="navbar-item" href="/#contact">
                Contact
            </a>
            
            <a class="navbar-item" href="https://vickylai.io/index.xml" target="_blank">
                RSS
            </a>
            
        </div>
    </nav>
</div>
        <section class="hero content-head">
            

            <div class="container hero-body">
                <div class="bold-title">-verbose</div>
                <div class="subtitle-box">
                    <span class="subtitle" id="tagline">Vicky&#39;s Blog</span>
                </div>
            </div>

        </section>
        

        <hr />

        <section>
            <div class="blog-head container center-me">
                
                <div class="preview"><img src="/pixels/recursion-pie.jpg#center"></div>
                <h3 class="top-pad blog-post-title bottom-pad">
                    <a href="/verbose/reduce-recursion-with-pie/">Understanding Array.prototype.reduce() and recursion using apple pie</a>
                </h3>
                
                <span class="my-tags">
                        <a href="/tags/javascript">javascript</a>
                </span> 
                <span class="my-tags">
                        <a href="/tags/coding">coding</a>
                </span> 
                <span class="my-tags">
                        <a href="/tags/backend">backend</a>
                </span> 
                <div class="post-data top-pad">
                    May 18, 2017 | 6 minutes read
                </div>

                
                <div class="blog-share">
                    Share this:
                    <a class="twitter-share-button" href="https://twitter.com/intent/tweet?text=Read%20Understanding%20Array.prototype.reduce%28%29%20and%20recursion%20using%20apple%20pie%20https%3a%2f%2fvickylai.io%2fverbose%2freduce-recursion-with-pie%2f" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                        twitter
                        <span class="hidden">Twitter</span>
                    </a> //
                    <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fvickylai.io%2fverbose%2freduce-recursion-with-pie%2f" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                        facebook
                        <span class="hidden">Facebook</span>
                    </a> //
                    <a class="icon-linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https://vickylai.io/&title=Understanding%20Array.prototype.reduce%28%29%20and%20recursion%20using%20apple%20pie&source=Vicky%20Lai"
                        onclick="window.open(this.href, 'linkedin-share','width=980,height=980');return false;">
                        linkedin
                        <span class="hidden">LinkedIn</span>
                    </a> //
                    <a class="icon-google-plus" href="https://plus.google.com/share?url=https%3a%2f%2fvickylai.io%2fverbose%2freduce-recursion-with-pie%2f" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                        google+
                        <span class="hidden">Google+</span>
                    </a>
                </div>
                

            </div>
            


            <section class="section is-small">
                <div class="container markdown top-pad">
                    
                    <p>I was having trouble understanding <code>reduce()</code> and recursion in JavaScript, so I wrote this article to explain it to myself (hey, look, recursion!). I hope you find my examples both helpful and delicious.</p>

<p>Given an array with nested arrays:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#204a87;font-weight:bold">var</span> <span style="color:#000">arr</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">1</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">2</span><span style="color:#000;font-weight:bold">],</span> <span style="color:#000;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">3</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000;font-weight:bold">[[</span><span style="color:#0000cf;font-weight:bold">4</span><span style="color:#000;font-weight:bold">]]]]</span></code></pre></div>
<p>We want to produce this:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#204a87;font-weight:bold">var</span> <span style="color:#000">flat</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">1</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#0000cf;font-weight:bold">2</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#0000cf;font-weight:bold">3</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#0000cf;font-weight:bold">4</span><span style="color:#000;font-weight:bold">]</span></code></pre></div>
<h1 id="using-for-loops-and-if-statements">Using for loops and if statements</h1>

<p>Naively, if we know the maximum number of nested arrays we&rsquo;ll encounter (there are 4 in this example), we can use <code>for</code> loops to iterate through each array item, then <code>if</code> statements to check if each item is in itself an array, and so on&hellip;</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#204a87;font-weight:bold">function</span> <span style="color:#000">flatten</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#204a87;font-weight:bold">var</span> <span style="color:#000">flat</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">[];</span>
    <span style="color:#204a87;font-weight:bold">for</span> <span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">var</span> <span style="color:#000">i</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span> <span style="color:#000">i</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">arr</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">length</span><span style="color:#000;font-weight:bold">;</span> <span style="color:#000">i</span><span style="color:#ce5c00;font-weight:bold">++</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">(</span><span style="color:#204a87">Array</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">isArray</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">arr</span><span style="color:#000;font-weight:bold">[</span><span style="color:#000">i</span><span style="color:#000;font-weight:bold">]))</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#204a87;font-weight:bold">for</span> <span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">var</span> <span style="color:#000">ii</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span> <span style="color:#000">ii</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">arr</span><span style="color:#000;font-weight:bold">[</span><span style="color:#000">i</span><span style="color:#000;font-weight:bold">].</span><span style="color:#000">length</span><span style="color:#000;font-weight:bold">;</span> <span style="color:#000">ii</span><span style="color:#ce5c00;font-weight:bold">++</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">(</span><span style="color:#204a87">Array</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">isArray</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">arr</span><span style="color:#000;font-weight:bold">[</span><span style="color:#000">i</span><span style="color:#000;font-weight:bold">][</span><span style="color:#000">ii</span><span style="color:#000;font-weight:bold">]))</span> <span style="color:#000;font-weight:bold">{</span>
            <span style="color:#204a87;font-weight:bold">for</span> <span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">var</span> <span style="color:#000">iii</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span> <span style="color:#000">iii</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">arr</span><span style="color:#000;font-weight:bold">[</span><span style="color:#000">i</span><span style="color:#000;font-weight:bold">][</span><span style="color:#000">ii</span><span style="color:#000;font-weight:bold">].</span><span style="color:#000">length</span><span style="color:#000;font-weight:bold">;</span> <span style="color:#000">iii</span><span style="color:#ce5c00;font-weight:bold">++</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
            <span style="color:#204a87;font-weight:bold">for</span> <span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">var</span> <span style="color:#000">iiii</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span> <span style="color:#000">iiii</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">arr</span><span style="color:#000;font-weight:bold">[</span><span style="color:#000">i</span><span style="color:#000;font-weight:bold">][</span><span style="color:#000">ii</span><span style="color:#000;font-weight:bold">][</span><span style="color:#000">iii</span><span style="color:#000;font-weight:bold">].</span><span style="color:#000">length</span><span style="color:#000;font-weight:bold">;</span> <span style="color:#000">iiii</span><span style="color:#ce5c00;font-weight:bold">++</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
                <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">(</span><span style="color:#204a87">Array</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">isArray</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">arr</span><span style="color:#000;font-weight:bold">[</span><span style="color:#000">i</span><span style="color:#000;font-weight:bold">][</span><span style="color:#000">ii</span><span style="color:#000;font-weight:bold">][</span><span style="color:#000">iii</span><span style="color:#000;font-weight:bold">]))</span> <span style="color:#000;font-weight:bold">{</span>
                <span style="color:#000">flat</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">push</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">arr</span><span style="color:#000;font-weight:bold">[</span><span style="color:#000">i</span><span style="color:#000;font-weight:bold">][</span><span style="color:#000">ii</span><span style="color:#000;font-weight:bold">][</span><span style="color:#000">iii</span><span style="color:#000;font-weight:bold">][</span><span style="color:#000">iiii</span><span style="color:#000;font-weight:bold">]);</span>
                <span style="color:#000;font-weight:bold">}</span> <span style="color:#204a87;font-weight:bold">else</span> <span style="color:#000;font-weight:bold">{</span>
                <span style="color:#000">flat</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">push</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">arr</span><span style="color:#000;font-weight:bold">[</span><span style="color:#000">i</span><span style="color:#000;font-weight:bold">][</span><span style="color:#000">ii</span><span style="color:#000;font-weight:bold">][</span><span style="color:#000">iii</span><span style="color:#000;font-weight:bold">]);</span>
                <span style="color:#000;font-weight:bold">}</span>
            <span style="color:#000;font-weight:bold">}</span>
            <span style="color:#000;font-weight:bold">}</span>
        <span style="color:#000;font-weight:bold">}</span> <span style="color:#204a87;font-weight:bold">else</span> <span style="color:#000;font-weight:bold">{</span>
            <span style="color:#000">flat</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">push</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">arr</span><span style="color:#000;font-weight:bold">[</span><span style="color:#000">i</span><span style="color:#000;font-weight:bold">][</span><span style="color:#000">ii</span><span style="color:#000;font-weight:bold">]);</span>
        <span style="color:#000;font-weight:bold">}</span>
        <span style="color:#000;font-weight:bold">}</span>
    <span style="color:#000;font-weight:bold">}</span> <span style="color:#204a87;font-weight:bold">else</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000">flat</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">push</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">arr</span><span style="color:#000;font-weight:bold">[</span><span style="color:#000">i</span><span style="color:#000;font-weight:bold">]);</span>
    <span style="color:#000;font-weight:bold">}</span>
    <span style="color:#000;font-weight:bold">}</span>
<span style="color:#000;font-weight:bold">}</span>

<span style="color:#a40000">// [1, 2, 3, 4]</span></code></pre></div>
<p>&hellip;Which works, but of course looks ridiculous. Besides looking ridiculous, a) it only works if we know how many nested arrays we&rsquo;ll process, b) it&rsquo;s hard to read and harder to understand, and c) can you imagine having to debug this mess?! (Gee, I think there&rsquo;s an extra <code>i</code> somewhere.)</p>

<h1 id="using-reduce">Using reduce</h1>

<p>JavaScript has a couple methods we can use to make our code a little less ridiculous. One of these is <code>reduce()</code> and it looks like this:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#204a87;font-weight:bold">var</span> <span style="color:#000">flat</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">arr</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">reduce</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">function</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">done</span><span style="color:#000;font-weight:bold">,</span><span style="color:#000">curr</span><span style="color:#000;font-weight:bold">){</span>
    <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">done</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">concat</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">curr</span><span style="color:#000;font-weight:bold">);</span>
<span style="color:#000;font-weight:bold">},</span> <span style="color:#000;font-weight:bold">[]);</span>

<span style="color:#a40000">// [ 1, 2, 3, [ [ 4 ] ] ]</span></code></pre></div>
<p>It&rsquo;s a lot less code, but we haven&rsquo;t taken care of some of the nested arrays. Let&rsquo;s first walk through <code>reduce()</code> together and examine what it does to see how we&rsquo;ll correct this.</p>

<blockquote>
<p><strong>Array.prototype.reduce()</strong></p>

<p>The reduce() method applies a function against an accumulator and each element in the array (from left to right) to reduce it to a single value. (<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce?v=example">MDN</a>)</p>
</blockquote>

<p>It&rsquo;s not quite as complicated as it seems. Let&rsquo;s think of <code>reduce()</code> as an out-of-work developer (AI took all the dev jobs) with an empty basket. We&rsquo;ll call him Adam. Adam&rsquo;s main function (ba-dum ching) is now to take apples from a pile, shine them up, and put them one-by-one into the basket. This basket of shiny apples is destined to become delicious apple pies. It&rsquo;s a very important job.</p>

<p><img src="/pixels/recursion-apple-formula.jpg#center" alt="Pile of apples + Adam: apple pie." />
<p class="has-text-centered img-caption">Apples plus human effort equals pie. Not to be confused with apple-human-pie, which is less appetizing.</p></p>

<p>In our above example, the pile of apples is our array, <code>arr</code>. Our basket is <code>done</code>, the accumulator. The initial value of <code>done</code> is an empty array, which we see as <code>[]</code> at the end of our reduce function. The apple that our out-of-work dev is currently shining, you guessed it, is <code>curr</code>. Once Adam processes the current apple, he places it into the basket (<code>.concat()</code>). When there are no more apples in the pile, he returns the basket of polished apples to us, and then probably goes home to his cat, or something.</p>

<h1 id="using-reduce-recursively-to-address-nested-arrays">Using reduce recursively to address nested arrays</h1>

<p>So that&rsquo;s all well and good, and now we have a basket of polished apples. But we still have some nested arrays to deal with. Going back to our analogy, let&rsquo;s say that some of the apples in the pile are in boxes. Within each box there could be more apples, and/or more boxes containing smaller, cuter apples.</p>

<p><img src="/pixels/recursion-nested-apples.jpg#center" alt="Box within a box within a box with apples." />
<p class="has-text-centered img-caption">Adorable, slightly skewed apples just want to be loved/eaten.</p></p>

<p>Here&rsquo;s what we want our apple-processing-function/Adam to do:</p>

<ol>
<li>If the pile of apples is a pile of apples, take an apple from the pile.</li>
<li>If the apple is an apple, polish it, put it in the basket.</li>
<li>If the apple is a box, open the box. If the box contains an apple, go to step 2.</li>
<li>If the box contains another box, open this box, and go to step 3.</li>
<li>When the pile is no more, give us the basket of shiny apples.</li>
<li>If the pile of apples is not a pile of apples, give back whatever it is.</li>
</ol>

<p>A recursive reduce function that accomplishes this is:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#204a87;font-weight:bold">function</span> <span style="color:#000">flatten</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">arr</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
  <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">(</span><span style="color:#204a87">Array</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">isArray</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">arr</span><span style="color:#000;font-weight:bold">))</span> <span style="color:#000;font-weight:bold">{</span>
  <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">arr</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">reduce</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">function</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">done</span><span style="color:#000;font-weight:bold">,</span><span style="color:#000">curr</span><span style="color:#000;font-weight:bold">){</span>
    <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">done</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">concat</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">flatten</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">curr</span><span style="color:#000;font-weight:bold">));</span>
    <span style="color:#000;font-weight:bold">},</span> <span style="color:#000;font-weight:bold">[]);</span>
  <span style="color:#000;font-weight:bold">}</span> <span style="color:#204a87;font-weight:bold">else</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">arr</span><span style="color:#000;font-weight:bold">;</span>
  <span style="color:#000;font-weight:bold">}</span>
<span style="color:#000;font-weight:bold">}</span>

<span style="color:#a40000">// [ 1, 2, 3, 4 ]</span></code></pre></div>
<p>Bear with me and I&rsquo;ll explain.</p>

<blockquote>
<p><strong>Recursion</strong></p>

<p>An act of a function calling itself. Recursion is used to solve problems that contain smaller sub-problems. A recursive function can receive two inputs: a base case (ends recursion) or a recursive case (continues recursion). (<a href="https://developer.mozilla.org/en-US/docs/Glossary/Recursion">MDN</a>)</p>
</blockquote>

<p>If you examine our code above, you&rsquo;ll see that <code>flatten()</code> appears twice. The first time it appears, it tells Adam what to do with the pile of apples. The second time, it tells him what to do with the thing he&rsquo;s currently holding, providing instructions in the case it&rsquo;s an apple, and in the case it&rsquo;s not an apple. The thing to note is that these instructions are a <em>repeat of the original instructions we started with</em> - and that&rsquo;s recursion.</p>

<p>We&rsquo;ll break it down line-by-line for clarity:</p>

<ol>
<li><code>function flatten(arr) {</code> - we name our overall function and specify that it will take an argument, <code>arr</code>.<br /></li>
<li><code>if (Array.isArray(arr)) {</code> - we examine the provided &ldquo;arrgument&rdquo; (I know, I&rsquo;m very funny) to determine if it is an array.<br /></li>
<li><code>return arr.reduce(function(done,curr){</code> - if the previous line is true and the argument is an array, we want to reduce it. This is our recursive case. We&rsquo;ll apply the following function to each array item&hellip;<br /></li>
<li><code>return done.concat(flatten(curr));</code> - an unexpected plot twist appears! The function we want to apply is the very function we&rsquo;re in. Colloquially: take it from the top.<br /></li>
<li><code>}, []);</code> - we tell our reduce function to start with an empty accumulator (<code>done</code>), and wrap it up.<br /></li>
<li><code>} else {</code> - this resolves our if statement at line 2. If the provided argument isn&rsquo;t an array&hellip;<br /></li>
<li><code>return arr;</code> - return whatever the <code>arr</code> is. (Hopefully a cute apple.) This is our base case that breaks us out of recursion.<br /></li>
<li><code>}</code> - end the else statement.<br /></li>
<li><code>}</code> - end the overall function.</li>
</ol>

<p>And we&rsquo;re done! We&rsquo;ve gone from our 24 line, 4-layers-deep nested <code>for</code> loop solution to a much more concise, 9 line recursive reduce solution. Reduce and recursion can seem a little impenetrable at first, but they&rsquo;re valuable tools that will save you lots of future effort once you grasp them.</p>

<p>And don&rsquo;t worry about Adam, our out-of-work developer. He got so much press after being featured in this article that he opened up his very own AI-managed apple pie factory. He&rsquo;s very happy.</p>

<p><img src="/pixels/recursion-adams-apples.jpg#center" alt="Adam's apple pie factory, &quot;Adam's Apples.&quot;" />
<p class="has-text-centered img-caption">+1 for you if you saw that one coming.</p></p>
                </div>

                

                <div class="container markdown center-me">
                    <p class="tweet-me">Like this post?
                        <a class="twitter-share-button" href="https://twitter.com/intent/tweet?text=Hey%20@hivickylai:%20I%20just%20read%20https%3a%2f%2fvickylai.io%2fverbose%2freduce-recursion-with-pie%2f%20and..."
                            onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">Tweet me about it!</a>
                    </p>
                </div>
            </section>

            <hr />

            <div class="container my-pagination center-me">
                <div class="columns is-mobile">

                    <div class="column is-one-third-desktop is-half-mobile no-padding">
                        
                        <div class="card no-border">
                            <div class="card-header bottom-pad no-border">
                                <a href="/verbose/iterating-objects-arrays/">
                                    &lt; Previously...</a>
                                        <br />
                            </div>
                            
                            <div class="card-image card-image-left no-border">
                                <a href="/verbose/iterating-objects-arrays/">
                                    <img class="pagination-img" src="/pixels/iteration-breakfast.jpg">
                                </a>
                            </div>
                            
                            <div class="card-content">
                                A quick reference to why your code isn&#39;t working, or some errors I frequently make with iteration when the coffee wears off.
                            </div>
                        </div>
                        
                    </div>

                    <div class="column is-one-third has-text-centered no-padding desktop">
                        <a class="up" href="/verbose/reduce-recursion-with-pie/#top">UP, JEEVES.</a>
                    </div>

                    <div class="column is-one-third-desktop is-half-mobile card-align-right no-padding">
                        
                        <div class="card no-border">
                            <div class="card-header bottom-pad has-text-right no-border">
                                <a href="/verbose/javascript-closures/">Next time... ></a>
                                <br />
                            </div>
                            
                            <div class="card-image card-image-right no-border">
                                <a href="/verbose/javascript-closures/">
                                    <img class="pagination-img" src="/pixels/closures-sandwich.jpg">
                                </a>
                            </div>
                            
                            <div class="card-content has-text-right">
                                An explanation of closures and how they can emulate private methods in JavaScript.
                            </div>
                        </div>
                        
                    </div>

                </div>

            </div>


            <div class="footer section center-me" id="footer">
    <div class="container columns bio-box">
        <div class="column is-one-quarter av-box">
            <img class="avatar small" src="https://vickylai.io/img/portrait.jpg">
        </div>
        <div class="column bio">
            <p class="bio-title">About Vicky Lai</p>
            <p id="footer-text">I&#39;m a nomadic developer who geeks out over 90s stuff and drinks too much coffee. My dream title is &#34;Lead Easter Egg Developer.&#34; This is where I put all the words that don&#39;t fit on Twitter.</p>
            <p class="top-pad">
                
                <a href="https://github.com/hivickylai" target="_blank">
                <img class="noborder" width="24" height="24" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAD2ElEQVR4nO1ay3HCMBClBEqgBDpIOkhK8AW0OcGB1XBD0Q73dAAdJB0kHYQOSAfQATlgMxhbv7VsmUnezF48HmnfarUfSYPBP7rBC&#43;oHsXh9AkkrkLQCpM&#43;S5N/F4vXpBfVDan0bY4Lr8YWopBNLcsNMcD1OzccL2VwNBdJMIH2zSRtEIH0LpFk2V8PUPCvI5moIklYC9SE28aoh9AEkrXpjiK6ImwyRjPgE1&#43;M2XJ2zNTqPEQJplpp4jSFmrRPP5moIqDepyRoF9aZV8n1weZ8tET1A3gv5Voxwb&#43;SvjRDFAL3e8y5pGhOmUs&#43;Tk2goU6nnLPJ5LZ&#43;cQAxh1Qkg9d5ncCHpCJIUSFKA&#43;guQflojg/QDqL&#43;K&#43;fK53TqGxoN8Aj&#43;lFvRo8J6t23h6J6TeeRl4qUa380wlPQcYUHmRP0d9z9oe9ZfVkEs1uvKKLaDObOkpL7Sy87/n1Xals9wjPLxAH7xSY9Dq&#43;1q1RUTVN2j1De7fNWBBj776Or0gOO3dmQFAOtJiaMU3lfTcIddaBAZCc0Zg5n3VLd0qAmPACaShLuAMJFB/JOBcgkD9EWXhfNNJWfS&#43;e8o3eku9D9a7Ln0zrNgLD&#43;AtHJ3KgwRG0ovUVGddA5ZqxNL9OoOFRtK&#43;rH4BjheUMhgnAALqLB3lMphtu7oMwDFAn66rGqdwjgulo1uPRlv4LxqglAr/vAEE0lvoAL25nBxcLmcDtwC9XQbgBME&#43;dIIFOGkcmmaBkgUTg&#43;PBcJMFsvAB0vcBBTj9QKkQYh&#43;B96AY4i1eTR3je8R86wUpg&#43;E5&#43;IWvvpB0rAzG7KtPQtJ7Au5nnSW9s3Su62M4gfBqK7R3L29AwztLVRnQFQeE1DtYqlHeflZuZQTSdxftMSzVqOlttbGPsd3S3J6mZnM1NPzfyguuWC/RhNQ74yTWiIr0WadUnREE6gOg3sR48TnB9RhQb6K9RLNlrjMhSzao2esWT7DvOQdAkor9/E5IOjq9ExyXmnUXC5c7wHrP&#43;eGcHcBSjXip2Spb58ROL5DmChCWagQLeiwklHRlPGaRw179As4jpg4rwFjvDYJfilj3dU1AbAvMRudm9S2R3wTnUXlH7TD7yD6Grvat0F0f0Knr10xuzAoC9UEsXp8i8bTp0F7U94E7z&#43;t93pisriXK5APmtZ3Uu7ivRd3FTkWiTD5gHHnHJF&#43;AY4RYcycnf6OM8/lbKgO0Tv5KIa&#43;zg4jzucl3fUg7wfXYtSVizWVfdTomPaIHy5PVaHMYymGB&#43;qMXFzT5YUXJEDFdsmbLbfvwOKOCwhBtNEu5EfpJ/B//uF/8AhiGWISX3cHqAAAAAElFTkSuQmCC">
                </a>
                
                <a href="https://codepen.io/hivickylai" target="_blank">
                <img class="noborder" width="24" height="24" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAADwElEQVR4nO1awVXzMAzOCIzACB0hI3QDcmltTvQQ&#43;XHDz6Jn2AA2gA1gA7pB2aDd4P8PIWmbJpHk2Anl5XvPFxpU6bOqT5aTJBMmTJgwYXhkK3uljHtSxj1lK3s1tj&#43;DQueYauO22uC/YrmtzjEd26/oKHYd3w6Bny5l8O3PZsOtebxR4HZtwVckgNvdmsebsf0NBn1vrzXgBxX42QL80Pf2emz/e0EbfBAHXssGbfBh7DjE0DmmCvCrT/CnRODXRRTJUtrIgAzuOX87f&#43;YXS&#43;bS4PxU2poDL55D2/C5XRqc00S47dLgfOx4K1DSdpTGz&#43;XutRFQ2QN8ZmTR&#43;JKpAO9IaQP8rv9&#43;uwionskx1YDfVJFUgHdDxlw4x5c22/j/DAKIZ8eTTM2RNnCfC1jPOmywCUiSJFnAeqbBfTIIjyeZHGkripxbkbaEBJRYGreiimRwyWRLG7h3bhr6EpAkxc9PgXuni2QAyZRIm8RuHwKOfYsmmT7SJkEIAio/Y0imj7RJ0ESuMvjma48rmXyD3Yy&#43;&#43;jq6gPWsq5AqwK8u9WD4/drlu8RQcLlRgHcMuyUR4uZGM&#43;RZYox2lNl8xJ4HSOyHJcDQrSirVR7QfnACKkdrVZa1Kz&#43;FlFPA6tnAVamwBBCtqAK3Wxqca3AZtSt1&#43;eTImQK30&#43;CypcE5rVLNvvYjIMeU13x0Zkpn0xTKfjF2j0DAYbfoVrRhB985zUgI&#43;1EJqJ4Bl/HGWPJWOUn42aAM7jW47MS3QQjIMeXN&#43;f2aG6ppOtr5XZNvcX8CjNNhAxHs5kbSNB0y4XD6i0bA&#43;Z2ecBHNjXfTVC23PfgZmgDCsXIYookRVilnZ9/JkE9t0HKGIm2&#43;9iOgO/02xzvLOp39NE&#43;spqZ2&#43;tT39loZt5H6GYsA22QjW9krTZzOilZX1jTV/KQHprEIUMZtONXdt7nhyucC1jNuNoQkwLKNJfLmhts01XwmsyEMAeBeJI4dgypg3Klyq9/gXoIQwBk2&#43;o7E2gpYvZCKbDLkWRncsw1yU9Z39NySrlZqRzKy9xqRF8dbetg42licMbztfZMsGT0PdjEScWTf/sU5ppTccG9rfQngjMCUcZuob5O0OF9PvY/wl6P&#43;t9HBURxa/G9rJQRo5m30KG&#43;UsQ4m5lwyOQRwpa1P3xAEPpLZRUB0aYsFiWS2ETCYtMUCWzIbgmSO18JKWyxwJFOyoktbLLSkuiBw3Lepw8VAIJm/Q9piQXKP0DQz/BOgJPPXSVssnA1Ne75yc5EoJfNipG3ChAkT/iL&#43;A3gnYQcATkHJAAAAAElFTkSuQmCC">
                </a>
                
                <a href="https://twitter.com/hivickylai" target="_blank">
                <img class="noborder" width="24" height="24" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAADRElEQVR4nO1ay3XqMBBVCS4hJbiDRwdJB3hjJFbxwqOTHcoMrJMOcAfQAXSQdEA6gA7eW9jmOYDAH30Mx/ecu2Fh5l6NpJE0jA0YMGDAgAED&#43;ooYFiEHehWASwG0KcklfkzlfBwlKvAdoxVM5XwsJO6EpL&#43;3yCWtREqjJt/WGife1JMhDa0QwyKsK/yMgEudsChRAQd6FRJ3AnB78c&#43;jRAVC4i6GRWhTpA4CMOKA&#43;1biy2wA&#43;ioHMUpUwNP3ZwG4/PVdXbYISSr/CO5dmyAAoy7Cf5uAew70pTHoUx9EJfVcmpAvdN1Gvt5agd/auZ&#43;n/7mTLkxoPec7iI8SFQjA6H8QKY106TSR9GJNvMHUvzIl1lGighgW4VTOx1zS6mwt0BlQ4cyKAZZHnwPuBdDm9PeJxKT5SABtTBYe&#43;ZZnd/Q1zM5H4nYGHB2dyvnYhAGi2HW8i281GkCbJtXXJXDAdS/EHwOSdGj8UcBl251CAG6dia&#43;u&#43;NqAJGXt/4A2PH1/7qkBql5ANdeBa8xXXVzWMaN3BpgOqrIFzaaAf053kE4ZZ8sAN1sT7nJjcNc7AxhjbCIxcRSYK942IIZFWE1R4S49rbNWKS8kqeoCFiUqeJhMqFOv6HcA3HkX0JE3xZdTwHegNsglHWoZwBhjAujHd8DGDQBc1zfggRa&#43;ClV9A97UUw8CNsumBzYO9Ok9aENsNP9LRIkKuMRv38EbYtbYAMaKW9o2R&#43;OesdNd5t2bAPTTWnyJ/DnJ&#43;a2NKarOBpQQKY2c3t4YoJHL29OPFNNi5VtcDWadxTN2x4WRqRfuOz0fKCPiS9xTFnBJB&#43;MdI3lhdB/bobU3zHuoCRqd&#43;h7NBCuprzehf&#43;cE5y09AjDqzeVJnScvW5hIeuFAnwJw68mQzJv4U3CgVxd9Pr0TL97U06UOjIcXX1yfzRyP&#43;nlri2vEsAgF4NL1fOeSDjabta6Cp&#43;/PXOKHrvnQvnj8ttbCW7wIzarkEj&#43;OndkeBJ9QWRF&#43;akIPC5zMeeN2LwocwG3X5qvOyAscd3eBxRkj89WlrsXxidzCfWAp2msp2xQipdFEYsIB102mCpd0KEzMJhKT3o10V8SwCEVKo0v0HduAAQMGXMM/rs839uro0rcAAAAASUVORK5CYII=">
                </a>
                
                <a href="mailto:hello@vickylai.io" target="_blank">
                <img class="noborder" width="24" height="24" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAADOklEQVR4nO1azXHyMBBVCZSQEuggKYESfMFSTnDI7nDDszucv3QQOkg6SDoIHSQdmA6Sg2NirfwZ&#43;QcLgt7MHmCMZvdJu2&#43;1RqmIiIiIiIiIiGuFQf66ZosEhHYgtCkD/BnaiWAG/KmSZTbRSLvgzoxsGmmXLLOJUkqpZJlNDPI2tFMj2vYQvFCEayBhawcN9CQ&#43;J2fg5GkMKHFiN8hfGvi9eiQMUKKR98EdHsg08r4afLLMJhr43WBFBjXwu1llN&#43;VDc9hM/wIJGnk/h830sLmr7KYM3iKgIIHy6sMFCZerEBpp58QDlFefcRohDZSnyDPruFwgCZbMlWktgq8l4GAiZ8xlKYRV6ZsKe3MrLBRCAz&#43;eQXDNOw/8KCt90/PH7wJAT/IohQ6ywVf71B4J3o8AdGUyRZ6dk0Jo5L1TtyqVvjcBJQmuQoQnQcpcUen9gm9FQEGCLZNmld2EVAiNtHN6l5pKPxgBB5NdVQAS6mSuyzqdByIaeGFV23Fl0pI5Dbzoula/iZC8SCFnIwSftZG50xKA/KWRn0eTSSf1&#43;LnvmoPMBJ3b5APfDakQGnlvHviui8yNQkBBAuWnuE3W3&#43;baVfpRCEiRlkqgr0LISl8iRVqeDQF1x9P5DPTWem2gN5lWp0izXgTIHRJd2FooRBuZ3Irfrg263egQPUgfAiwnU&#43;SZk5vdZDKzfiNkTs4rOpA7AAFyuPizQ/XP8qt7dN1d00g7N3X4tcEP&#43;4R1nGO2IwD40z2Cx7VYzhvLdEmRZynyrLqmUu7czpfcOWymbd90&#43;RMgitIcNlOD9OH7ew2Uy/a5Dhp40U7m6ENuSpui6zsPkFOW2vmar8MaeHEPdFuudw90W/Tz/oRKcmvS0qstbyRAztOVUkoj/esW&#43;Agmiq7P4Oa/BMiR8pDt5ylNtuXHRvu1BGigF1ffh2s/T08C5e7dgV58CchkvocOqMdpsIpuXQv9&#43;2qsZrDY9659Fian2qKFLl6Oitmatw5fiMkWujrLVEb8WcA88N0l5bs/CfUttBJfrEM7OoJZLfRvlRxgvHQxVm2h275I&#43;Dv200L/xXz3NQ2Uxz9KhnYgtEUCIiIiIiIiIiKuFd&#43;oxN7Z3PBXwQAAAABJRU5ErkJggg==">
                </a>
                
        </div>
    </div>
    </div>
    </div>
    

    </section>

    
    <script>
        $('a[href^="\/verbose\/reduce-recursion-with-pie\/#"]').click(function (e) {
            e.preventDefault();
            var target = this.hash;
            $('html, body').animate({
                scrollTop: $(target).offset().top
            }, 500);
            return false;
        })
    </script>
</body>